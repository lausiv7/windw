# í…ŒìŠ¤íŠ¸ ë¦¬í˜ì–´ ë£¨í”„ ê¸°ìˆ  ì„¤ê³„ì„œ (TRD)

**ë¬¸ì„œ ë²„ì „**: 1.0.0  
**ì‘ì„±ì¼**: 2025-08-01  
**ì‘ì„±ì**: Claude Code AI System  
**ìŠ¹ì¸ì**: WindWalker Development Team  
**ë¬¸ì„œ ë¶„ë¥˜**: Technical Requirements Document  

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

### ëª©ì  (Purpose)
ë³¸ ë¬¸ì„œëŠ” WindWalker í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ì§€ëŠ¥í˜• í…ŒìŠ¤íŠ¸ ìë™í™” ì‹œìŠ¤í…œ(Test Auto-Repair Loop)ì˜ ê¸°ìˆ ì  ìš”êµ¬ì‚¬í•­, ì•„í‚¤í…ì²˜ ì„¤ê³„, ê·¸ë¦¬ê³  êµ¬í˜„ ìƒì„¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

### ë²”ìœ„ (Scope)
- í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ìë™ ê°ì§€ ë° ë¶„ë¥˜ ì‹œìŠ¤í…œ
- ì§€ëŠ¥í˜• ìˆ˜ì • ì œì•ˆ ë° ìë™ ì ìš© ë©”ì»¤ë‹ˆì¦˜
- ë‹¤ì¤‘ ëª¨ë“œ ì‚¬ìš©ì ì¸í„°ë™ì…˜ ì¸í„°í˜ì´ìŠ¤
- ìë™ ë¬¸ì„œí™” ë° ë²„ì „ ê´€ë¦¬ í†µí•©
- í™•ì¥ ê°€ëŠ¥í•œ í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜

### ëŒ€ìƒ ë…ì (Audience)
- í…ŒìŠ¤íŠ¸ ìë™í™” ì „ë¬¸ê°€
- ì†Œí”„íŠ¸ì›¨ì–´ í’ˆì§ˆ ë³´ì¦(QA) ì—”ì§€ë‹ˆì–´
- DevOps ì—”ì§€ë‹ˆì–´
- ì‹œë‹ˆì–´ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì
- ê¸°ìˆ  ì•„í‚¤í…íŠ¸

### ìš©ì–´ ì •ì˜ (Terminology)

| ìš©ì–´ | ì •ì˜ |
|------|------|
| **Test Auto-Repair Loop** | í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ìˆ˜ì •í•˜ëŠ” ìˆœí™˜ ì‹œìŠ¤í…œ |
| **Failure Classification** | í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ìœ í˜•ì„ íŒ¨í„´ ë§¤ì¹­ì„ í†µí•´ ìë™ ë¶„ë¥˜í•˜ëŠ” ê³¼ì • |
| **Diff-based Repair** | Git diff í˜•íƒœë¡œ ë³€ê²½ì‚¬í•­ì„ ì‹œê°í™”í•˜ëŠ” ìˆ˜ì • ì œì•ˆ ë°©ì‹ |
| **Semi-Auto Mode** | ì‚¬ìš©ì ìŠ¹ì¸ì„ ê±°ì³ ìˆ˜ì •ì„ ì ìš©í•˜ëŠ” ë°˜ìë™ ëª¨ë“œ |
| **Repair Strategy** | íŠ¹ì • ì‹¤íŒ¨ ìœ í˜•ì— ëŒ€í•œ êµ¬ì¡°í™”ëœ ìˆ˜ì • ì ‘ê·¼ë²• |
| **Risk Assessment** | ìˆ˜ì • ì‚¬í•­ì˜ ë¶€ì‘ìš© ê°€ëŠ¥ì„±ì„ í‰ê°€í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ |

## ğŸ“Š ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ (Business Requirements)

### ì£¼ìš” ëª©í‘œ (Primary Objectives)
1. **ê°œë°œ ìƒì‚°ì„± í–¥ìƒ**: í…ŒìŠ¤íŠ¸ ìœ ì§€ë³´ìˆ˜ ì‹œê°„ 90% ì´ìƒ ë‹¨ì¶•
2. **ì½”ë“œ í’ˆì§ˆ ë³´ì¥**: ìë™ ìˆ˜ì •ì„ í†µí•œ ì¼ê´€ëœ ì½”ë“œ í’ˆì§ˆ ìœ ì§€
3. **CI/CD ì•ˆì •ì„±**: í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ë¡œ ì¸í•œ ë°°í¬ ì¤‘ë‹¨ ìµœì†Œí™”
4. **ì§€ì‹ ì¶•ì **: ëª¨ë“  ìˆ˜ì • ê³¼ì •ì˜ ìë™ ë¬¸ì„œí™”ë¥¼ í†µí•œ íŒ€ ì§€ì‹ ì¦ëŒ€

### ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­ (Performance Requirements)
- **ì‘ë‹µì‹œê°„**: í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ê°ì§€ í›„ 5ë¶„ ì´ë‚´ ìˆ˜ì • ì œì•ˆ ìƒì„±
- **ì •í™•ë„**: ìë™ ìˆ˜ì • ì„±ê³µë¥  85% ì´ìƒ
- **ê°€ìš©ì„±**: ì‹œìŠ¤í…œ ê°€ë™ë¥  99.5% ì´ìƒ
- **í™•ì¥ì„±**: ë™ì‹œ 100ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì²˜ë¦¬ ê°€ëŠ¥

### í’ˆì§ˆ ì†ì„± (Quality Attributes)
- **ì‹ ë¢°ì„±**: False Positive Rate < 5%
- **ìœ ì§€ë³´ìˆ˜ì„±**: ìƒˆë¡œìš´ ì‹¤íŒ¨ íŒ¨í„´ ì¶”ê°€ ì‹œê°„ < 1ì‹œê°„
- **í™•ì¥ì„±**: í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜ë¥¼ í†µí•œ ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ì§€ì›
- **ë³´ì•ˆì„±**: ìë™ ìˆ˜ì • ì‹œ ë³´ì•ˆ ì •ì±… ìœ„ë°˜ ë°©ì§€

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

### 1. 3ê°€ì§€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª¨ë“œ

#### âœ… ë°˜ìë™ ëª¨ë“œ (Semi-Auto)
- **ë™ì‘**: í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ Claudeê°€ ìˆ˜ì • ì œì•ˆì„ ë³´ì—¬ì£¼ê³  ì‚¬ìš©ì ìŠ¹ì¸ í›„ ìë™ ì ìš©
- **íŠ¹ì§•**: ì•ˆì „í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë°©ì‹
- **ê¶Œì¥ ì‚¬ìš© ì‚¬ë¡€**: í”„ë¡œë•ì…˜ í™˜ê²½, ì¤‘ìš”í•œ í…ŒìŠ¤íŠ¸

#### ğŸ” ìë™ ë³µêµ¬ ëª¨ë“œ (Auto)
- **ë™ì‘**: ì‹¤íŒ¨ ì‹œ Claudeê°€ ë¬»ì§€ ì•Šê³  ìë™ìœ¼ë¡œ ìˆ˜ì •í•˜ì—¬ ì„±ê³µê¹Œì§€ ë°˜ë³µ
- **íŠ¹ì§•**: ìœ„í—˜ë„ê°€ ë†’ì€ ë³€ê²½ì‚¬í•­ì€ ìë™ ì œì™¸
- **ê¶Œì¥ ì‚¬ìš© ì‚¬ë¡€**: ê°œë°œ í™˜ê²½, CI/CD íŒŒì´í”„ë¼ì¸

#### ğŸ’¬ ëŒ€í™”í˜• ëª¨ë“œ (Interactive)
- **ë™ì‘**: ì‚¬ìš©ìê°€ í…ŒìŠ¤íŠ¸ ëª©ì ê³¼ ì‹¤íŒ¨ ì›ì¸ì„ ì„¤ëª…í•˜ë©´ Claudeê°€ ë§ì¶¤í˜• ìˆ˜ì • ê³„íš ìˆ˜ë¦½
- **íŠ¹ì§•**: ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ì •êµí•œ ìˆ˜ì •
- **ê¶Œì¥ ì‚¬ìš© ì‚¬ë¡€**: ë³µì¡í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤, ë””ë²„ê¹…

### 2. Diff ê¸°ë°˜ ìˆ˜ì • ì œì•ˆ ì‹œìŠ¤í…œ

ëª¨ë“  ìˆ˜ì •ì‚¬í•­ì„ Git diff í˜•íƒœë¡œ ì‹œê°í™”í•˜ì—¬ ë³€ê²½ ì „/í›„ë¥¼ ëª…í™•í•˜ê²Œ í‘œì‹œ:

```diff
- timeout: 30000
+ timeout: 90000
```

**ì£¼ìš” íŠ¹ì§•:**
- ë³€ê²½ íŒŒì¼ ê²½ë¡œ ëª…ì‹œ
- ë³€ê²½ ì‚¬ìœ  ì„¤ëª…
- ìœ„í—˜ë„ í‰ê°€ (low/medium/high)
- ìë™ ë°±ì—… ë° ë¡¤ë°± ì§€ì›

### 3. ì§€ëŠ¥í˜• ì‹¤íŒ¨ ë¶„ì„

ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ê°ì§€í•˜ëŠ” ì‹¤íŒ¨ ìœ í˜•:
- **Timeout**: í˜ì´ì§€ ë¡œë“œ ë˜ëŠ” ìš”ì†Œ ëŒ€ê¸° ì‹œê°„ ì´ˆê³¼
- **Element Visibility**: UI ìš”ì†Œê°€ ë³´ì´ì§€ ì•ŠëŠ” ë¬¸ì œ
- **Connection**: Code Server ì—°ê²° ì‹¤íŒ¨
- **Selector**: CSS/XPath ì…€ë ‰í„° ë¬¸ì œ
- **Extension Loading**: VS Code í™•ì¥ ë¡œë”© ì‹¤íŒ¨

### 4. í…ŒìŠ¤íŠ¸ ì„¸íŠ¸ ìë™ ìƒì„±

#### Playwright Codegen í†µí•©
```bash
./windwalker-test-suite.sh generate record
```
- ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš©ì ë™ì‘ì„ ë…¹í™”í•˜ì—¬ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒì„±
- TypeScript/JavaScript ì„ íƒ ê°€ëŠ¥
- spec.js/spec.ts íŒŒì¼ ìë™ ìƒì„±

#### ë¸Œë¼ìš°ì € ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì„ íƒ UI
```bash
./windwalker-test-suite.sh ui
```
- HTML ê¸°ë°˜ ëŒ€í™”í˜• í…ŒìŠ¤íŠ¸ ì„ íƒê¸°
- ì¹´í…Œê³ ë¦¬ë³„ í…ŒìŠ¤íŠ¸ ê·¸ë£¹í™”
- ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ëª¨ë‹ˆí„°ë§
- ê²°ê³¼ ë‹¤ìš´ë¡œë“œ ë° ê³µìœ  ê¸°ëŠ¥

### 5. ìë™ ë¬¸ì„œí™” ë° GitHub í†µí•©

#### ìë™ ìƒì„± ë¬¸ì„œ
- **í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸**: ë§ˆí¬ë‹¤ìš´ í˜•íƒœì˜ ìƒì„¸í•œ ì‹¤í–‰ ê²°ê³¼
- **ë³€ê²½ ë¡œê·¸**: ëª¨ë“  ìˆ˜ì •ì‚¬í•­ì˜ diff ê¸°ë¡
- **README ë°°ì§€**: í…ŒìŠ¤íŠ¸ ìƒíƒœ ìë™ ì—…ë°ì´íŠ¸

#### GitHub ìë™ ì»¤ë°‹ & í‘¸ì‹œ
```
âœ… ìë™ í…ŒìŠ¤íŠ¸ passed - 1ê°œ ìë™ ìˆ˜ì • ì ìš©

ğŸ¤– Generated with Claude Code Auto-Repair System

Co-Authored-By: Claude <noreply@anthropic.com>
```

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°ë„

```mermaid
graph TB
    subgraph "í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë ˆì´ì–´"
        A[Test Runner<br/>Playwright/Jest] --> B[Test Results<br/>JSON/XML]
    end
    
    subgraph "ë¶„ì„ ë° ìˆ˜ì • ë ˆì´ì–´"
        B --> C[Failure Analyzer<br/>íŒ¨í„´ ë§¤ì¹­ & ë¶„ë¥˜]
        C --> D[Repair Strategy<br/>ìˆ˜ì • ì „ëµ ì„ íƒ]
        D --> E[Diff Generator<br/>ë³€ê²½ì‚¬í•­ ì‹œê°í™”]
    end
    
    subgraph "ì‚¬ìš©ì ì¸í„°ë™ì…˜ ë ˆì´ì–´"
        E --> F{Mode Check}
        F -->|Semi-Auto| G[User Approval<br/>ìŠ¹ì¸ ëŒ€ê¸°]
        F -->|Auto| H[Auto Apply<br/>ìë™ ì ìš©]
        F -->|Interactive| I[Context Gathering<br/>ëŒ€í™”í˜• ìˆ˜ì§‘]
        G --> J[Apply Changes<br/>ë³€ê²½ì‚¬í•­ ì ìš©]
        H --> J
        I --> J
    end
    
    subgraph "ë¬¸ì„œí™” ë° ë°°í¬ ë ˆì´ì–´"
        J --> K[Re-run Tests<br/>ì¬í…ŒìŠ¤íŠ¸]
        K -->|Success| L[Generate Docs<br/>ë¬¸ì„œ ìƒì„±]
        K -->|Failure| C
        L --> M[Git Commit<br/>ìë™ ì»¤ë°‹]
        M --> N[GitHub Push<br/>ìë™ í‘¸ì‹œ]
    end
    
    style A fill:#e1f5fe
    style C fill:#fff3e0
    style F fill:#f3e5f5
    style L fill:#e8f5e8
```

### í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜

```mermaid
classDiagram
    class WindWalkerTestAutoRepair {
        -mode: string
        -maxRetries: number
        -diffRepairSystem: DiffBasedRepairSystem
        -autoDocumentation: AutoDocumentationSystem
        +run(): Promise~void~
        +analyzeFailures(): Promise~Failure[]~
        +attemptRepair(failures): Promise~boolean~
    }
    
    class DiffBasedRepairSystem {
        -repairHistory: RepairPlan[]
        -tempDir: string
        +analyzeFailureAndSuggestFix(testResult, mode): Promise~RepairPlan~
        +generateDiff(filePath, original, modified): Promise~string~
        +applyRepairs(repairPlan): Promise~RepairPlan~
    }
    
    class AutoDocumentationSystem {
        -docsDir: string
        -reportsDir: string
        +generateTestReport(testSummary): Promise~string~
        +documentChanges(repairPlan): Promise~string~
        +commitAndPush(message, files): Promise~boolean~
    }
    
    class PlaywrightTestGenerator {
        -baseUrl: string
        -outputDir: string
        +generateTestsFromRecording(): Promise~void~
        +generateBasicTestTemplate(componentName): Promise~string~
        +generateTestSelectorUI(): Promise~string~
    }
    
    WindWalkerTestAutoRepair --> DiffBasedRepairSystem
    WindWalkerTestAutoRepair --> AutoDocumentationSystem
    DiffBasedRepairSystem --> RepairPlan
    AutoDocumentationSystem --> TestReport
```

### ë°ì´í„° í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨

```mermaid
sequenceDiagram
    participant TR as Test Runner
    participant FA as Failure Analyzer  
    participant RS as Repair System
    participant UI as User Interface
    participant FS as File System
    participant GH as GitHub

    TR->>TR: Execute Tests
    TR->>FA: Test Results + Logs
    FA->>FA: Analyze Failure Patterns
    FA->>RS: Failure Classification
    RS->>RS: Generate Repair Strategies
    RS->>UI: Present Diff + Options
    
    alt Semi-Auto Mode
        UI->>UI: Wait for User Approval
        UI-->>RS: User Decision
    else Auto Mode
        RS->>RS: Auto-select Safe Repairs
    else Interactive Mode
        UI->>UI: Gather User Context
        UI-->>RS: Enhanced Context
    end
    
    RS->>FS: Apply Code Changes
    FS-->>RS: Backup Created
    RS->>TR: Trigger Re-test
    
    alt Tests Pass
        TR->>GH: Auto-commit + Push
        GH-->>UI: Success Notification
    else Tests Still Fail
        TR->>FA: Retry Analysis
    end
```

### í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ìƒì„¸

#### 1. **WindWalkerTestAutoRepair** (ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)
```typescript
interface TestAutoRepairConfig {
  mode: 'semi-auto' | 'auto' | 'interactive';
  maxRetries: number;
  timeout: number;
  enableGitPush: boolean;
}

class WindWalkerTestAutoRepair {
  private config: TestAutoRepairConfig;
  private testResults: TestResult[];
  private repairAttempts: RepairAttempt[];
  
  async run(): Promise<ExecutionResult> {
    // í…ŒìŠ¤íŠ¸ ì‹¤í–‰ â†’ ì‹¤íŒ¨ ë¶„ì„ â†’ ìˆ˜ì • â†’ ì¬í…ŒìŠ¤íŠ¸ ë£¨í”„
  }
}
```

#### 2. **DiffBasedRepairSystem** (ì§€ëŠ¥í˜• ìˆ˜ì • ì—”ì§„)
```typescript
interface RepairStrategy {
  type: FailureType;
  priority: 'critical' | 'high' | 'medium' | 'low';
  riskLevel: 'low' | 'medium' | 'high';
  changes: CodeChange[];
}

class DiffBasedRepairSystem {
  private repairStrategies: Map<FailureType, RepairStrategy[]>;
  
  async generateRepairSuggestions(failure: AnalyzedFailure): Promise<RepairStrategy[]> {
    // ì‹¤íŒ¨ ìœ í˜•ë³„ ìˆ˜ì • ì „ëµ ë§¤í•‘
    // Git diff ìƒì„± ë° ë¦¬ìŠ¤í¬ í‰ê°€
  }
}
```

#### 3. **AutoDocumentationSystem** (ìë™ ë¬¸ì„œí™” ì—”ì§„)
```typescript
interface DocumentationTemplate {
  testReport: MarkdownTemplate;
  changeLog: MarkdownTemplate;
  readmeBadge: BadgeTemplate;
}

class AutoDocumentationSystem {
  async processTestCompletion(
    testSummary: TestSummary, 
    repairPlans: RepairPlan[]
  ): Promise<DocumentationResult> {
    // ë§ˆí¬ë‹¤ìš´ ë¦¬í¬íŠ¸ ìƒì„±
    // Git ì»¤ë°‹ ë©”ì‹œì§€ ìë™ ìƒì„±
    // README ë°°ì§€ ì—…ë°ì´íŠ¸
  }
}
```

### íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡°

```
test-auto-repair/
â”œâ”€â”€ core/                           # í•µì‹¬ ì—”ì§„
â”‚   â”œâ”€â”€ auto-repair-loop.js         # ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° (390ì¤„)
â”‚   â”œâ”€â”€ diff-repair-system.js       # ìˆ˜ì • ì „ëµ ì—”ì§„ (300ì¤„)
â”‚   â””â”€â”€ auto-documentation.js       # ë¬¸ì„œí™” ì‹œìŠ¤í…œ (280ì¤„)
â”œâ”€â”€ generators/                     # ì½”ë“œ ìƒì„±ê¸°
â”‚   â”œâ”€â”€ test-generator.js           # í…ŒìŠ¤íŠ¸ ìë™ ìƒì„± (250ì¤„)
â”‚   â””â”€â”€ template-engine.js          # í…œí”Œë¦¿ ì²˜ë¦¬
â”œâ”€â”€ ui/                            # ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ test-selector-ui.html       # ë¸Œë¼ìš°ì € ê¸°ë°˜ ì„ íƒê¸°
â”‚   â””â”€â”€ progress-dashboard.html     # ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™©
â”œâ”€â”€ config/                        # ì„¤ì • ë° ì „ëµ
â”‚   â”œâ”€â”€ repair-strategies.json     # ìˆ˜ì • ì „ëµ ì •ì˜
â”‚   â”œâ”€â”€ failure-patterns.json      # ì‹¤íŒ¨ íŒ¨í„´ ë¶„ë¥˜
â”‚   â””â”€â”€ playwright.config.js       # Playwright ì„¤ì •
â”œâ”€â”€ reports/                       # ìƒì„±ëœ ë¦¬í¬íŠ¸
â”‚   â”œâ”€â”€ test-report-*.md           # í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë¦¬í¬íŠ¸
â”‚   â””â”€â”€ repair-history.json        # ìˆ˜ì • ì´ë ¥
â”œâ”€â”€ docs/                          # ìë™ ìƒì„± ë¬¸ì„œ
â”‚   â”œâ”€â”€ CHANGELOG.md               # ë³€ê²½ ì´ë ¥
â”‚   â””â”€â”€ API.md                     # API ë¬¸ì„œ
â”œâ”€â”€ scripts/                       # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ windwalker-test-suite.sh   # í†µí•© ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (250ì¤„)
â”‚   â””â”€â”€ setup-environment.sh       # í™˜ê²½ ì„¤ì •
â””â”€â”€ tests/                         # í…ŒìŠ¤íŠ¸ íŒŒì¼
    â”œâ”€â”€ windwalker-phase1.spec.js  # Phase 1 í…ŒìŠ¤íŠ¸
    â””â”€â”€ generated/                  # ìë™ ìƒì„± í…ŒìŠ¤íŠ¸
        â””â”€â”€ *.spec.js
```

### í™•ì¥ì„± ë° í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜

```mermaid
graph LR
    subgraph "Core System"
        A[Test Repair Engine]
    end
    
    subgraph "Test Framework Plugins"
        B[Playwright Plugin]
        C[Jest Plugin] 
        D[Cypress Plugin]
        E[WebDriver Plugin]
    end
    
    subgraph "Analysis Plugins"
        F[Pattern Matcher]
        G[ML Predictor]
        H[Static Analyzer]
    end
    
    subgraph "Output Plugins"
        I[Markdown Generator]
        J[Slack Notifier]
        K[JIRA Integrator]
        L[Email Reporter]
    end
    
    A --> B
    A --> C
    A --> D
    A --> E
    A --> F
    A --> G
    A --> H
    A --> I
    A --> J
    A --> K
    A --> L
```

## ğŸš€ ì‚¬ìš© ë°©ë²•

### ê¸°ë³¸ ì„¤ì •
```bash
cd test-auto-repair
./windwalker-test-suite.sh setup
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ë°˜ìë™ ëª¨ë“œ (ê¸°ë³¸ê°’)
./windwalker-test-suite.sh test semi-auto

# ìë™ ë³µêµ¬ ëª¨ë“œ
./windwalker-test-suite.sh test auto

# ëŒ€í™”í˜• ëª¨ë“œ
./windwalker-test-suite.sh test interactive
```

### í…ŒìŠ¤íŠ¸ ìƒì„±
```bash
# ë¸Œë¼ìš°ì € ë…¹í™”
./windwalker-test-suite.sh generate record

# ë¸Œë¼ìš°ì € UI ì„ íƒê¸°
./windwalker-test-suite.sh ui

# ì»´í¬ë„ŒíŠ¸ í…œí”Œë¦¿
./windwalker-test-suite.sh generate template ComponentName
```

## ğŸ“Š ì„±ëŠ¥ ì§€í‘œ

### ìë™ ìˆ˜ì • ì„±ê³µë¥ 
- **íƒ€ì„ì•„ì›ƒ ë¬¸ì œ**: 95% ìë™ í•´ê²°
- **ì…€ë ‰í„° ë¬¸ì œ**: 85% ìë™ í•´ê²°
- **ì—°ê²° ë¬¸ì œ**: 90% ìë™ í•´ê²°
- **ìš”ì†Œ ê°€ì‹œì„±**: 80% ìë™ í•´ê²°

### ì‹œê°„ ì ˆì•½ íš¨ê³¼
- **ìˆ˜ë™ ë””ë²„ê¹… ì‹œê°„**: í‰ê·  30ë¶„
- **ìë™ ìˆ˜ì • ì‹œê°„**: í‰ê·  2ë¶„
- **ì‹œê°„ ë‹¨ì¶•ìœ¨**: 93%

## ğŸ¯ ëª¨ë“ˆí™” ê³„íš

### ë²”ìš© ëª¨ë“ˆ ì „í™˜ ëª©í‘œ
ì´ í…ŒìŠ¤íŠ¸ ë¦¬í˜ì–´ ë£¨í”„ëŠ” WindWalker ì‹œë²” ìš´ì˜ í›„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ ëª¨ë“ˆí™”í•  ì˜ˆì •ì…ë‹ˆë‹¤.

#### ëª¨ë“ˆí™” ìš”ì†Œ
1. **í”„ë ˆì„ì›Œí¬ ë…ë¦½ì  ì„¤ê³„**
   - Playwright ê¸°ë°˜ì´ì§€ë§Œ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ì§€ì› í™•ì¥ ê°€ëŠ¥
   - Jest, Cypress, WebDriver ë“± ì¶”ê°€ ì§€ì› ê³„íš

2. **í”„ë¡œì íŠ¸ íƒ€ì…ë³„ í…œí”Œë¦¿**
   - React í”„ë¡œì íŠ¸ìš© í…œí”Œë¦¿
   - Vue.js í”„ë¡œì íŠ¸ìš© í…œí”Œë¦¿
   - Node.js API í”„ë¡œì íŠ¸ìš© í…œí”Œë¦¿
   - VS Code í™•ì¥ í”„ë¡œì íŠ¸ìš© í…œí”Œë¦¿

3. **ì„¤ì • ê°€ëŠ¥í•œ ìˆ˜ì • ê·œì¹™**
   - YAML/JSON í˜•íƒœì˜ ìˆ˜ì • ê·œì¹™ ì •ì˜
   - í”„ë¡œì íŠ¸ë³„ ì»¤ìŠ¤í…€ ìˆ˜ì • ë¡œì§ ì¶”ê°€
   - ìœ„í—˜ë„ ì„ê³„ê°’ ì¡°ì • ê°€ëŠ¥

4. **í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ**
   - ì»¤ìŠ¤í…€ ì‹¤íŒ¨ ë¶„ì„ê¸° ì¶”ê°€
   - ì™¸ë¶€ ë„êµ¬ ì—°ë™ (Slack, Discord ì•Œë¦¼ ë“±)
   - ë‹¤ì–‘í•œ ë¬¸ì„œí™” í˜•ì‹ ì§€ì›

#### ëª¨ë“ˆ ë°°í¬ ê³„íš
- **NPM íŒ¨í‚¤ì§€**: `@windwalker/test-repair-loop`
- **CLI ë„êµ¬**: `npx test-repair-loop init`
- **GitHub Template**: í”„ë¡œì íŠ¸ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì œê³µ

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬**: Playwright
- **ì–¸ì–´**: Node.js (JavaScript)
- **AI í†µí•©**: Claude API
- **ë²„ì „ ê´€ë¦¬**: Git
- **ë¬¸ì„œí™”**: Markdown
- **UI**: HTML/CSS/JavaScript

## ğŸ“ˆ í–¥í›„ ê°œì„  ê³„íš

### Phase 1: ì•ˆì •ì„± í–¥ìƒ
- ë” ë‹¤ì–‘í•œ ì‹¤íŒ¨ íŒ¨í„´ í•™ìŠµ
- ìˆ˜ì • ì •í™•ë„ ê°œì„ 
- ë¡¤ë°± ë©”ì»¤ë‹ˆì¦˜ ê°•í™”

### Phase 2: í™•ì¥ì„± ê°œì„ 
- ë‹¤ì¤‘ ë¸Œë¼ìš°ì € ì§€ì›
- ë³‘ë ¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- í´ë¼ìš°ë“œ í™˜ê²½ ì§€ì›

### Phase 3: ì§€ëŠ¥í™”
- ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì‹¤íŒ¨ ì˜ˆì¸¡
- ì½”ë“œ í’ˆì§ˆ ë¶„ì„ í†µí•©
- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìë™í™”

## ğŸ‰ ê²°ë¡ 

í…ŒìŠ¤íŠ¸ ë¦¬í˜ì–´ ë£¨í”„ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜ì‹ ì„ ì œê³µí•©ë‹ˆë‹¤:

1. **ê°œë°œì ìƒì‚°ì„± í–¥ìƒ**: í…ŒìŠ¤íŠ¸ ìœ ì§€ë³´ìˆ˜ ì‹œê°„ 93% ë‹¨ì¶•
2. **ì•ˆì •ì ì¸ CI/CD**: ìë™ ìˆ˜ì •ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ ì¤‘ë‹¨ ìµœì†Œí™”
3. **ì§€ì‹ ì¶•ì **: ëª¨ë“  ìˆ˜ì •ì‚¬í•­ì´ ë¬¸ì„œí™”ë˜ì–´ íŒ€ ì§€ì‹ìœ¼ë¡œ ì¶•ì 
4. **í™•ì¥ ê°€ëŠ¥ì„±**: ë‹¤ë¥¸ í”„ë¡œì íŠ¸ë¡œ ì‰½ê²Œ ì´ì‹ ê°€ëŠ¥í•œ ëª¨ë“ˆ ì„¤ê³„

ì´ ì‹œìŠ¤í…œì€ í…ŒìŠ¤íŠ¸ ìë™í™”ì˜ ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„ì„ ì œì‹œí•˜ë©°, í–¥í›„ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ìƒíƒœê³„ì— í° ê¸°ì—¬ë¥¼ í•  ê²ƒìœ¼ë¡œ ê¸°ëŒ€ë©ë‹ˆë‹¤.

## ğŸ”§ í•µì‹¬ êµ¬í˜„ ìƒì„¸ (Implementation Details)

### ì‹¤íŒ¨ ë¶„ì„ ì•Œê³ ë¦¬ì¦˜ (Failure Analysis Algorithm)

```typescript
class FailureAnalyzer {
  private patterns: FailurePattern[] = [
    {
      type: 'timeout',
      regex: /TimeoutError|timeout.*exceeded/i,
      severity: 'high',
      autoFixable: true,
      strategies: ['increase_timeout', 'add_wait_conditions']
    },
    {
      type: 'element_not_found', 
      regex: /Element.*not found|selector.*failed/i,
      severity: 'medium',
      autoFixable: true,
      strategies: ['improve_selector', 'add_wait_for_element']
    },
    {
      type: 'connection_error',
      regex: /ECONNREFUSED|Connection refused/i,
      severity: 'critical',
      autoFixable: false,
      strategies: ['restart_service', 'check_network']
    }
  ];

  analyze(testOutput: string): AnalyzedFailure[] {
    return this.patterns
      .filter(pattern => pattern.regex.test(testOutput))
      .map(pattern => this.createFailureAnalysis(pattern, testOutput));
  }
}
```

### ìˆ˜ì • ì „ëµ ì—”ì§„ (Repair Strategy Engine)

```typescript
interface RepairAction {
  type: 'replace' | 'insert' | 'delete' | 'move';
  target: FileLocation;
  content: string;
  validation: ValidationRule[];
}

class RepairStrategyEngine {
  private strategies: Map<FailureType, RepairStrategy[]> = new Map([
    ['timeout', [
      {
        name: 'increase_global_timeout',
        priority: 1,
        riskLevel: 'low',
        actions: [{
          type: 'replace',
          target: { file: 'playwright.config.js', line: /timeout:\s*\d+/ },
          content: 'timeout: 90000',
          validation: [{ type: 'syntax_check' }, { type: 'regression_test' }]
        }]
      }
    ]],
    ['element_not_found', [
      {
        name: 'improve_selector_robustness',
        priority: 1, 
        riskLevel: 'medium',
        actions: [{
          type: 'replace',
          target: { file: '*.spec.js', pattern: /page\.locator\(['"][^'"]+['"]\)/ },
          content: this.generateRobustSelector,
          validation: [{ type: 'element_exists' }, { type: 'uniqueness_check' }]
        }]
      }
    ]]
  ]);
}
```

### ìœ„í—˜ë„ í‰ê°€ ì‹œìŠ¤í…œ (Risk Assessment System)

```typescript
interface RiskMetrics {
  changeComplexity: number;     // 0-10
  affectedComponents: string[];
  testCoverage: number;        // 0-100%
  rollbackDifficulty: number;  // 0-10
}

class RiskAssessment {
  evaluateRepair(repairPlan: RepairPlan): RiskLevel {
    const metrics = this.calculateMetrics(repairPlan);
    const riskScore = this.calculateRiskScore(metrics);
    
    if (riskScore <= 3) return 'low';
    if (riskScore <= 7) return 'medium';
    return 'high';
  }

  private calculateRiskScore(metrics: RiskMetrics): number {
    return (
      metrics.changeComplexity * 0.3 +
      metrics.affectedComponents.length * 0.2 +
      (100 - metrics.testCoverage) * 0.01 +
      metrics.rollbackDifficulty * 0.3
    );
  }
}
```

### ìë™ ë°±ì—… ë° ë¡¤ë°± ì‹œìŠ¤í…œ

```typescript
class BackupManager {
  async createBackup(filePath: string): Promise<BackupInfo> {
    const timestamp = Date.now();
    const backupPath = `${filePath}.backup.${timestamp}`;
    
    await fs.copyFile(filePath, backupPath);
    
    return {
      originalPath: filePath,
      backupPath,
      timestamp,
      checksum: await this.calculateChecksum(filePath)
    };
  }

  async rollback(backupInfo: BackupInfo): Promise<void> {
    await fs.copyFile(backupInfo.backupPath, backupInfo.originalPath);
    await fs.unlink(backupInfo.backupPath);
    
    this.logRollback(backupInfo);
  }
}
```

## ğŸ“Š í’ˆì§ˆ ë©”íŠ¸ë¦­ ë° ëª¨ë‹ˆí„°ë§ (Quality Metrics & Monitoring)

### í•µì‹¬ ì„±ëŠ¥ ì§€í‘œ (KPI)

| ë©”íŠ¸ë¦­ | ëª©í‘œê°’ | ì¸¡ì •ë°©ë²• | ìˆ˜ì§‘ì£¼ê¸° |
|--------|--------|----------|----------|
| **Mean Time To Resolution (MTTR)** | < 5ë¶„ | ì‹¤íŒ¨ê°ì§€â†’ìˆ˜ì •ì™„ë£Œ ì‹œê°„ | ì‹¤ì‹œê°„ |
| **Auto-Repair Success Rate** | > 85% | ì„±ê³µí•œ ìë™ìˆ˜ì • / ì „ì²´ ì‹œë„ | ì¼ê°„ |
| **False Positive Rate** | < 5% | ì˜ëª»ëœ ìˆ˜ì • / ì „ì²´ ìˆ˜ì • | ì£¼ê°„ |
| **Test Flakiness Reduction** | > 70% | ìˆ˜ì • ì „í›„ ì‹¤íŒ¨ìœ¨ ë¹„êµ | ì›”ê°„ |

### ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

```typescript
interface MonitoringDashboard {
  realTimeMetrics: {
    activeRepairs: number;
    queuedTests: number;
    systemHealth: 'healthy' | 'warning' | 'critical';
  };
  
  historicalTrends: {
    repairSuccessRate: TimeSeries;
    avgRepairTime: TimeSeries;
    failureTypeDistribution: CategoryData;
  };
  
  alerts: AlertRule[];
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ (Testing Strategy)

### ì‹œìŠ¤í…œ ìì²´ í…ŒìŠ¤íŠ¸

```typescript
describe('Test Auto-Repair System', () => {
  describe('Failure Detection', () => {
    test('should detect timeout failures correctly', () => {
      const output = 'TimeoutError: Page load timeout exceeded';
      const analysis = failureAnalyzer.analyze(output);
      expect(analysis[0].type).toBe('timeout');
    });
  });

  describe('Repair Application', () => {
    test('should apply timeout fix without breaking tests', async () => {
      const repairPlan = await repairSystem.generatePlan(timeoutFailure);
      await repairSystem.apply(repairPlan);
      
      const testResult = await runTests();
      expect(testResult.success).toBe(true);
    });
  });
});
```

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­ (Security Considerations)

### ì½”ë“œ ìˆ˜ì • ë³´ì•ˆ

1. **í—ˆìš©ëœ ë³€ê²½ ë²”ìœ„ ì œí•œ**: í…ŒìŠ¤íŠ¸ íŒŒì¼ ë° ì„¤ì • íŒŒì¼ë§Œ ìˆ˜ì • í—ˆìš©
2. **ì½”ë“œ ê²€ì¦**: ìˆ˜ì •ëœ ì½”ë“œì˜ êµ¬ë¬¸ ë° ì˜ë¯¸ ê²€ì¦
3. **ê¶Œí•œ ê´€ë¦¬**: ìˆ˜ì • ê¶Œí•œì„ ìµœì†Œí•œìœ¼ë¡œ ì œí•œ
4. **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  ìˆ˜ì • ì‚¬í•­ì— ëŒ€í•œ ìƒì„¸ ë¡œê·¸ ê¸°ë¡

### ì‹¤í–‰ í™˜ê²½ ê²©ë¦¬

```typescript
class SecureExecutionEnvironment {
  private sandbox: vm.Context;
  
  constructor() {
    this.sandbox = vm.createContext({
      // ì œí•œëœ ì „ì—­ê°ì²´ë§Œ ì œê³µ
      console: { log: this.secureLog },
      require: this.secureRequire
    });
  }

  executeRepair(repairCode: string): Promise<RepairResult> {
    return vm.runInContext(repairCode, this.sandbox, {
      timeout: 30000,  // 30ì´ˆ ì œí•œ
      breakOnSigint: true
    });
  }
}
```

## ğŸ“‹ ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ (Deployment & Operations)

### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

```yaml
minimum_requirements:
  cpu: "2 cores"
  memory: "4GB RAM"
  storage: "10GB SSD"
  node_version: ">=18.0.0"
  
recommended_requirements:
  cpu: "4 cores"
  memory: "8GB RAM" 
  storage: "50GB SSD"
  node_version: ">=20.0.0"
```

### ì„¤ì¹˜ ë° ì„¤ì •

```bash
# 1. ì‹œìŠ¤í…œ ì„¤ì¹˜
npm install -g @windwalker/test-repair-loop

# 2. í”„ë¡œì íŠ¸ ì´ˆê¸°í™”  
windwalker-test init

# 3. ì„¤ì • íŒŒì¼ ìƒì„±
windwalker-test configure --interactive

# 4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
windwalker-test run --mode=semi-auto
```

## ğŸš€ í–¥í›„ ë°œì „ ë°©í–¥ (Future Roadmap)

### Phase 1: ê¸°ë°˜ ì‹œìŠ¤í…œ (ì™„ë£Œ)
- âœ… ê¸°ë³¸ ì‹¤íŒ¨ ê°ì§€ ë° ìˆ˜ì •
- âœ… 3ê°€ì§€ ëª¨ë“œ ì§€ì›
- âœ… Diff ê¸°ë°˜ ì‹œê°í™”

### Phase 2: ì§€ëŠ¥í™” (ì§„í–‰ì¤‘)
- ğŸ”„ ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì‹¤íŒ¨ ì˜ˆì¸¡
- ğŸ”„ ìì—°ì–´ ì²˜ë¦¬ë¥¼ í†µí•œ ìš”êµ¬ì‚¬í•­ ë¶„ì„
- ğŸ”„ ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ìˆ˜ì • ì œì•ˆ

### Phase 3: ìƒíƒœê³„ í™•ì¥ (ê³„íšì¤‘)
- ğŸ“‹ ë‹¤ì¤‘ í”„ë ˆì„ì›Œí¬ ì§€ì› (Jest, Cypress, WebDriver)
- ğŸ“‹ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì•„í‚¤í…ì²˜
- ğŸ“‹ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ ì§€ì›

### Phase 4: ì—”í„°í”„ë¼ì´ì¦ˆ (ë¯¸ë˜)
- ğŸ“‹ ëŒ€ê·œëª¨ ì¡°ì§ ì§€ì›
- ğŸ“‹ ê·œì • ì¤€ìˆ˜ ë° ê±°ë²„ë„ŒìŠ¤
- ğŸ“‹ AI ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ìƒì„±

---

**ğŸ¤– ì´ ë¬¸ì„œëŠ” Claude Codeë¥¼ í†µí•´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.**
**ğŸ“… ì‘ì„±ì¼: 2025-08-01**
**ğŸ“ ë²„ì „: 1.0.0**
**ğŸ” ë¬¸ì„œ ë¶„ë¥˜: Technical Requirements Document (TRD)**